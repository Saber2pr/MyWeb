window.__require=function t(e,n,o){function i(c,a){if(!n[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}}var h=n[c]={exports:{}};e[c][0].call(h.exports,function(t){return i(e[c][1][t]||t)},h,h.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({CameraManager:[function(t,e,n){"use strict";cc._RF.push(e,"91d60eeQPBLV78IlSz17jKw","CameraManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this._camera=null,this.layerList=null,this.currentIndex=null}return t.getInstance=function(){return this.instance=this.instance?this.instance:new t,this.instance},Object.defineProperty(t.prototype,"zoomRatio",{set:function(t){this.camera.zoomRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LastLayer",{get:function(){return this.layerList[this.currentIndex-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CurrentLayer",{get:function(){return this.layerList[this.currentIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NextLayer",{get:function(){return this.layerList[this.currentIndex+1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this._camera.getComponent(cc.Camera)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sceneName",{get:function(){return this.scene.name},enumerable:!0,configurable:!0}),t.prototype.update=function(t){t?t(this._camera,this.layerList[this.currentIndex].position):this._camera.position=this.layerList[this.currentIndex].position},t.prototype.initCamera=function(t,e,n){this.currentIndex=0,this._length=e.length,this.layerList=e,this._camera=t,this.scene=n},t.prototype.go=function(t,e){switch(t){case-1:this.currentIndex>0&&(this.currentIndex--,this.update(e));break;case 0:this.update(e);break;case 1:this.currentIndex<this._length-1&&(this.currentIndex++,this.update(e));break;default:throw new Error("CameraManager go error")}},t.prototype.reload=function(t,e){var n=this;cc.director.loadScene(this.scene.name,function(){n.go(t),e&&e()})},t}();n.default=o,cc._RF.pop()},{}],Camera:[function(t,e,n){"use strict";cc._RF.push(e,"f34f0T5UXtExJ5Ytcn4ZQdv","Camera"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,c=t("./CameraManager"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layerList=[],e.scene=null,e}return __extends(e,t),e.prototype.onLoad=function(){c.default.getInstance().initCamera(this.node,this.layerList,this.scene)},__decorate([r({type:[cc.Node],displayName:"layer\u8282\u70b9"})],e.prototype,"layerList",void 0),__decorate([r({type:cc.SceneAsset,displayName:"\u573a\u666f"})],e.prototype,"scene",void 0),e=__decorate([i],e)}(cc.Component);n.default=a,cc._RF.pop()},{"./CameraManager":"CameraManager"}],ConnectLayer:[function(t,e,n){"use strict";cc._RF.push(e,"7c18cbwqRFKKIGSUedubgcj","ConnectLayer"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,c=t("./SceneMediator"),a=t("./Model"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.beforeBtn=null,e.nextBtn=null,e.PlayLayer=null,e.PlayLayerAnchor=null,e}return __extends(e,t),e.prototype.start=function(){var t=this;this.nextBtn.node.on("click",function(){c.default.getInstance().go(1,function(){var e=cc.instantiate(t.PlayLayer);e.setParent(t.PlayLayerAnchor),e.setPosition(0,0),a.default.getInstance().saveLayerNode(e)})}),this.beforeBtn.node.on("click",function(){c.default.getInstance().backto()})},__decorate([r(cc.Button)],e.prototype,"beforeBtn",void 0),__decorate([r(cc.Button)],e.prototype,"nextBtn",void 0),__decorate([r(cc.Prefab)],e.prototype,"PlayLayer",void 0),__decorate([r(cc.Node)],e.prototype,"PlayLayerAnchor",void 0),e=__decorate([i],e)}(cc.Component);n.default=s,cc._RF.pop()},{"./Model":"Model","./SceneMediator":"SceneMediator"}],Data:[function(t,e,n){"use strict";cc._RF.push(e,"119aaxmZeFB3I7hIBVjUFqT","Data"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./MathVec"),i=function(){function t(){var t=this;this.mergeSuper=function(e,n){var o=new Array,i=new Array;t.__updateTimes=t.updateTimes;for(var r=0,c=e;r<c.length;r++){var a=n(c[r]);o.push(a.arr),i.push(a.delta)}return{map:o,delta:i}},this.mergeLeft=function(e){var n,i,r,c=e.length,a=o.fillArray(0,e.length);for(n=0;n<c;n++){for(i=-1,r=n+1;r<c;r++)if(0!==e[r]){i=r,e[n]===e[r]?a[r]=r-n:0===e[n]?a[r]=r-n:a[r]=r-n-1;break}-1!==i&&(0===e[n]?(e[n]=e[i],e[i]=0,n-=1):e[n]===e[i]&&(e[n]=2*e[n],t.updateTimes=e[n]<t.maxValue?t.updateTimes+e[n]:t.updateTimes+1,e[i]=0))}return{arr:e,delta:a}},this.mergeRight=function(e){var n=e.slice().reverse(),o=t.mergeLeft(n);return{arr:o.arr.slice().reverse(),delta:o.delta.slice().reverse()}}}return t.getInstance=function(){return this.instance=this.instance?this.instance:new t,this.instance},t.prototype.init=function(t,e){return void 0===e&&(e=2048),this.updateTimes=0,this.__updateTimes=0,this.maxValue=e,this.map=o.fillArraySuper(0,{raw:t,col:t}),this.__map=o.fillArraySuper(0,{raw:t,col:t}),this},Object.defineProperty(t.prototype,"data",{get:function(){return this.map},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateValue",{get:function(){return this.updateTimes-this.__updateTimes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"score",{get:function(){return this.updateTimes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MaxValue",{get:function(){return this.maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isChanged",{get:function(){return this.__map.toString()!==this.map.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"result",{get:function(){return Boolean(Math.abs(this.updateTimes)%2)},enumerable:!0,configurable:!0}),t.prototype.merge=function(t,e){var n,i=this;switch(void 0===e&&(e=this.map),o.visitArray(this.map,function(t,e){i.__map[t][e]=i.map[t][e]}),t){case"left":var r=this.mergeSuper(e,this.mergeLeft);this.map=r.map,n=r.delta;break;case"right":r=this.mergeSuper(e,this.mergeRight);this.map=r.map,n=r.delta;break;case"up":r=this.mergeSuper(o.transformArray(e),this.mergeLeft);n=o.transformArray(r.delta),this.map=o.transformArray(r.map);break;case"down":r=this.mergeSuper(o.transformArray(e),this.mergeRight);n=o.transformArray(r.delta),this.map=o.transformArray(r.map);break;default:throw new Error("Data merge method error")}return n},Object.defineProperty(t.prototype,"isFull",{get:function(){var t=this;return this.hasNext=!1,o.visitArray(this.map,function(e,n){0===t.map[e][n]&&(t.hasNext=!0)}),!this.hasNext},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasTwice",{get:function(){return o.hasTwiceSuper(this.map)},enumerable:!0,configurable:!0}),t.prototype.addRand=function(t){var e=this;void 0===t&&(t=1);var n=o.PointList();return o.moreFunc(function(){if(o.visitArray(e.map,function(t,o){0===e.map[t][o]&&(n.push({x:t,y:o}),e.hasNext=!0)}),e.hasNext){var t=o.toInt(Math.random()*n.length);o.alterArray(e.map,{raw:n[t].x,col:n[t].y,value:2})}},t),this.hasNext},t}();n.default=i,cc._RF.pop()},{"./MathVec":"MathVec"}],EndLayout:[function(t,e,n){"use strict";cc._RF.push(e,"64fb6nSVS1CZ4msPhRE0aT0","EndLayout"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,c=t("./Data"),a=t("./Model"),s=t("./SceneMediator"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score=null,e.title=null,e.restartBtn=null,e.maxValue=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.maxValue=c.default.getInstance().MaxValue},e.prototype.start=function(){var t=this;c.default.getInstance().result?(this.title.string="Win! "+this.maxValue+"!",this.score.string=String(c.default.getInstance().score-1),this.restartBtn.node.getChildByName("Label").getComponent(cc.Label).string="continue!",this.restartBtn.node.on("click",function(){a.default.getInstance().returnPreLayout(t.node)})):(this.title.string="Over",this.score.string=String(c.default.getInstance().score),this.restartBtn.node.getChildByName("Label").getComponent(cc.Label).string="restart",this.restartBtn.node.on("click",function(){a.default.getInstance().returnPreLayout(t.node),s.default.getInstance().reload()}))},__decorate([r(cc.Label)],e.prototype,"score",void 0),__decorate([r(cc.Label)],e.prototype,"title",void 0),__decorate([r(cc.Button)],e.prototype,"restartBtn",void 0),e=__decorate([i],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./Data":"Data","./Model":"Model","./SceneMediator":"SceneMediator"}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"2efceOfn7JPBKi3SPZ28b3H","Game"),Object.defineProperty(n,"__esModule",{value:!0});n.default={edge:{width:{start:-150,end:150},height:{start:-150,end:150}},type:[{size:3,num:9,edgeScale:.9,blockScale:1.1},{size:4,num:16,edgeScale:1,blockScale:1},{size:8,num:64,edgeScale:1.1,blockScale:.5}]},cc._RF.pop()},{}],HActionComponent:[function(t,e,n){"use strict";cc._RF.push(e,"dd86cTJwoRLD4RfQUrUrE7G","HActionComponent"),e.exports=cc.Class({extends:cc.Component,getTargetNode:function(){return this._targetNode},getActionEngine:function(){return this.actionEngine||(this.actionEngine=t("HActionEngine")()),this.actionEngine},__$init:function(t){this._targetNode=t},onLoad:function(){this._targetNode=this.node},addActionToTickQueue:function(t){t.getComponent()?cc.warn("HActionComponent -> addActionToTickQueue warn: \u91cd\u590d\u6dfb\u52a0HAction\u53ef\u80fd\u4f1a\u5e26\u6765\u4e0d\u53ef\u77e5\u7684\u95ee\u9898\uff01 "):(this.getActionEngine().pushActionToQueue(t),t.startWithTarget(this))},removeAction:function(t){return this.getActionEngine().removeAction(t)},removeActions:function(t){for(var e=this.getActionEngine(),n=0;n<t.length;n++)e.destroyAction(t[n])},removeAllActions:function(){return this.getActionEngine().removeAllActions(this)},getRunningActions:function(){return this.getActionEngine().getRunningActions(this)},getActionByTag:function(t){return this.getActionEngine().getActionByTag(this,t)},playComplete:function(t){return this.getActionEngine().actionPlayComplete(t)},addActionToInvalidList:function(t){return this.getActionEngine().addActionToInvalidList(t)},destroyAction:function(t){return this.getActionEngine().__invalidActionAndNext(t)},onDestroy:function(){this.actionEngine&&this.actionEngine.removeAllActions(this),this.actionEngine=null,this._targetNode=null}}),cc._RF.pop()},{HActionEngine:"HActionEngine"}],HActionEngine:[function(t,e,n){"use strict";cc._RF.push(e,"31c46uiyt5LL5IVA/3tEnKZ","HActionEngine");var o=t("HAction"),i=t("HActionComponent"),r=cc.Class({ctor:function(){this.uuid="HActionEngine",this._id=this.uuid,this._actions=[],this._tempInvalidIds={},cc.director.getScheduler().scheduleUpdate(this,0,!1)},pushActionToQueue:function(t){t instanceof o||cc.error("HActionEngine -> pushActionToQueue error: params must be a subclass of HAction!"),this._actions.push(t)},getActionByTag:function(t,e){t instanceof i||cc.error("HActionEngine -> getActionByTag error: params must be a instance of HActionComponent!");for(var n=this._actions.length,o=0;o<n;o++){var r=this._actions[o];if(r.getComponent().uuid===t.uuid){if(r.getTag()===e)return r;for(var c=r.$getNextAction();c;){if(c.getTag()===e)return c;c,c=c.$getNextAction()}}}return null},getRunningActions:function(t){t instanceof i||cc.error("HActionEngine -> getRunningActions error: params must be a instance of HActionComponent!");for(var e=[],n=this._actions.length,o=0;o<n;o++){var r=this._actions[o];r.getComponent().uuid===t.uuid&&r.getState()===ezaction.State.RUNNING&&e.push(r)}return e},removeAction:function(t){if(t instanceof o||cc.error("HActionEngine -> removeAction error: params must be a subclass of HAction!"),t.getState()!==ezaction.State.DEAD){for(var e=t.$uuid,n=this._actions.length,i=0;i<n;i++){var r=this._actions[i];if(r.$uuid===e)return this.__invalidActionAndNext(r),!0;for(var c=r,a=r.$getNextAction();a;){if(a.$uuid===e)return c.$removeNextAction(),!0;c=a,a=a.$getNextAction()}}return!1}},removeAllActions:function(t){t instanceof i||cc.error("HActionEngine -> removeAllActions error: params must be a instance of HActionComponent!");for(var e=this._actions.length,n=0;n<e;n++){var o=this._actions[n];o.getComponent().uuid===t.uuid&&this.__invalidActionAndNext(o)}},actionPlayComplete:function(t){for(var e=this._actions.length,n=0;n<e;n++){if(this._actions[n].$uuid===t.$uuid){var o=t.$getNextAction();o&&(o.startWithTarget(t.getComponent()),this._actions[n]=o),t.$invalid();break}}},__invalidActionAndNext:function(t){for(var e=t.$getNextAction();e;){var n=e;e=n.$getNextAction(),n.$invalid()}t.$invalid()},addActionToInvalidList:function(t){t instanceof o||cc.error("HActionEngine -> addActionToInvalidList error: params must be a subclass of HAction!"),this._tempInvalidIds[t.$uuid]=t},update:function(t){var e=this._actions;if(Object.keys(this._tempInvalidIds).length>0){for(var n in this._tempInvalidIds)this._tempInvalidIds[n].$destroy();for(var o=0,i=!0,r=e.length;o<r;i?o++:o)e[o]&&this._tempInvalidIds[e[o].$uuid]?(e.splice(o,1),i=!1):i=!0;this._tempInvalidIds={}}e.forEach(function(e){var n=e.getComponent();n&&n.enabled&&n.isValid&&e._$update(t)})}}),c=null;e.exports=function(){return c||(c=new r)},cc._RF.pop()},{HAction:"HAction",HActionComponent:"HActionComponent"}],HActionInstant:[function(t,e,n){"use strict";cc._RF.push(e,"c1ce5m3CI9J0oYW6IeihgOF","HActionInstant");var o=cc.Class({extends:t("HAction"),ctor:function(){},update:function(t){this.$actionComplete()},cloneSelf:function(){var t=new o;return t.init(this.getVars()),t}});o.create=function(t){var e=new o;return e.init(t),e},e.exports=o,cc._RF.pop()},{HAction:"HAction"}],HActionInterval:[function(t,e,n){"use strict";cc._RF.push(e,"46adaO1SFNFJL7ueeCyHPzE","HActionInterval");var o=cc.Class({extends:t("HAction"),ctor:function(){this._duration=.001,this._currentTime=0,this._progress=0,this._lastprogress=0},getCurrentTime:function(){return this._currentTime},getDuration:function(){return this._duration},getProgress:function(){return this._progress},init:function(t,e){t>0&&(this._duration=t),this._super(e)},playAction:function(){this._super(),this._currentTime=0,this._progress=0,this._lastprogress=0},$update:function(t){this._currentTime+=t,this._currentTime>=this._duration?(this._progress=1,this.update(this._progress),this.$actionComplete()):(this._progress=this._currentTime/this._duration,this.update(this._progress))},update:function(t){if("function"==typeof this._vars.easing){var e=this._lastprogress;this._progress=this._vars.easing(this._progress),this._lastprogress=this._progress,e<1&&this._progress>1&&"function"==typeof this._vars.onArrived&&this._vars.onArrived(this)}this._super(this._progress)},onArrived:function(t){return"function"==typeof t&&(this._vars.onArrived=t),this},easing:function(t){return"function"==typeof t&&(this._vars.easing=t),this},cloneSelf:function(){var t=new o;return t.init(this.getDuration(),this.getVars()),t},$destroy:function(){this._super()}});o.create=function(t,e){var n=new o;return n.init(t,e),n},e.exports=o,cc._RF.pop()},{HAction:"HAction"}],HActionJump:[function(t,e,n){"use strict";cc._RF.push(e,"2835eb0qaxACqlGJ2tG9uT4","HActionJump");var o=cc.Class({extends:t("HActionInterval"),ctor:function(){this._delta={x:0,y:0},this._height=0,this._jumps=1,this._startPos={}},init:function(t,e,n,o,i){this._super(t,i),this._delta.x=e.x,this._delta.x=e.y,this._height=n,this._jumps=o},startWithTarget:function(t){this._super(t),this._startPos.x=this.getNode().x,this._startPos.y=this.getNode().y},update:function(t){this._super(t);this._vars;var e=this.getNode(),n=(this.getProgress(),t*this._jumps%1),o=4*this._height*n*(1-n);o+=this._delta.y*t,e.y=this._startPos.y+o,e.x=this._startPos.x+this._delta.x*dt},cloneSelf:function(){var t=new o;return t.init(this.getDuration(),this._delta,this._height,this._jumps,this.getVars()),t.easing(this.easingFunc),t}}),i=cc.Class({extends:o,ctor:function(){this._endPos={x:0,y:0}},init:function(t,e,n,o,i){this._super(t,e,n,o,i),this._endPos.x=e.x,this._endPos.y=e.y},startWithTarget:function(t){this._super(t),this._delta.x=this._endPos.x-this._startPos.x,this._delta.y=this._endPos.y-this._startPos.y},cloneSelf:function(){var t=new i;return t.init(this.getDuration(),this._endPos,this._height,this._jumps,this.getVars()),t}});e.exports={jumpBy:o,jumpTo:i},cc._RF.pop()},{HActionInterval:"HActionInterval"}],HActionSequence:[function(t,e,n){"use strict";cc._RF.push(e,"58aa7FHegpJ8Y8lZ/7cwdMu","HActionSequence");var o=cc.Class({extends:t("HAction"),ctor:function(){this._actions=[]},setSpeed:function(t){return t=Math.abs(t),this._actions.forEach(function(e){e.setSpeed(t)}),this._super(t)},pushAction:function(t,e){for(var n=0;n<t.length;n++){var o=t[n];e&&o.setSpeed(this.getSpeed()),this._actions.push(o)}},playAction:function(){this._super();for(var t=this._actions.length,e=0;e<t;e++)for(var n=this._actions[e];n;)n.playAction(),n=n.$getNextAction()},$update:function(t){if(this._super(t),this._actions){for(var e=!0,n=this._actions.length,o=0;o<n;o++){for(var i=this._actions[o];i;){if(i.getNode()||i.startWithTarget(this._actionComponent),i.isRunning()){i._$update(t),e=!1;break}i=i.$getNextAction()}if(!e)break}e&&this.$actionComplete()}else this.$actionComplete()},cloneSelf:function(){var t=new o;if(t.init(this.getVars()),this._actions){var e=[];this._actions.forEach(function(t){e.push(t.clone())}),t.pushAction(e,!1),e=null}return t},$invalid:function(){this._actions?(this._actions.forEach(function(t){t.destroy()}),this._actions=null,this._super()):this._super()},$destroy:function(){this._actions=null,this._super()}});o.create=function(t,e){var n=new o;return n.init(e),n.pushAction(t),n},e.exports=o,cc._RF.pop()},{HAction:"HAction"}],HActionSpawn:[function(t,e,n){"use strict";cc._RF.push(e,"258d5YJqmtEtLCNgqnb/iHH","HActionSpawn");var o=cc.Class({extends:t("HAction"),ctor:function(){this._actions=[]},setSpeed:function(t){t=Math.abs(t);for(var e=0;e<this._actions.length;e++)this._actions[e].setSpeed(t);return this._super(t)},pushAction:function(t,e){for(var n=0;n<t.length;n++){var o=t[n];e&&o.setSpeed(this.getSpeed()),this._actions.push(o)}},playAction:function(){this._super();for(var t=this._actions.length,e=0;e<t;e++)for(var n=this._actions[e];n;)n.playAction(),n=n.$getNextAction()},$update:function(t){if(this._super(t),this._actions){for(var e=!0,n=this._actions.length,o=0;o<n;o++)for(var i=this._actions[o];i;){if(i.getNode()||i.startWithTarget(this._actionComponent),i.isRunning()){i._$update(t),e=!1;break}i=i.$getNextAction()}e&&this.$actionComplete()}else this.$actionComplete()},cloneSelf:function(){var t=new o;if(t.init(this.getVars()),this._actions){var e=[];this._actions.forEach(function(t){e.push(t)}),t.pushAction(e,!1),e=null}return t},$invalid:function(){this._actions?(this._actions.forEach(function(t){t.destroy()}),this._actions=null,this._super()):this._super()},$destroy:function(){this._actions=null,this._super()}});o.create=function(t,e){var n=new o;return n.init(e),n.pushAction(t),n},e.exports=o,cc._RF.pop()},{HAction:"HAction"}],HActionTweenBase:[function(t,e,n){"use strict";cc._RF.push(e,"1c55dk+bEBLo6Fjy3K2tAt9","HActionTweenBase");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=cc.Class({extends:t("HActionInterval"),ctor:function(){this._intialAttrList=null,this._target=null},setTarget:function(t){this._target=t},getTarget:function(){return this._target||this.getNode()},playAction:function(){if(this._super(),this._intialAttrList){var t=this.getTarget(),e=this._intialAttrList;for(var n in e)t[n]=e[n]}},startWithTarget:function(t){this._super(t),this._intialAttrList={};var e=this.getTarget();for(var n in this._vars){if("tag"!=n)if("number"==typeof e[n])"number"===o(e[n])&&(this._intialAttrList[n]=e[n])}},$destroy:function(){this._intialAttrList=null,this._super()}});e.exports=i,cc._RF.pop()},{HActionInterval:"HActionInterval"}],HActionTweenBy:[function(t,e,n){"use strict";cc._RF.push(e,"730acq1UkJFEbOj3Hp8CXaM","HActionTweenBy");var o=cc.Class({extends:t("HActionTweenBase"),ctor:function(){},update:function(t){this._super(t);var e=this._vars,n=this.getTarget(),o=this.getProgress(),i=this._intialAttrList;for(var r in i){var c=i[r];n[r]=c+e[r]*o}},cloneSelf:function(){var t=new o;return t.init(this.getDuration(),this.getVars()),t.easing(this.easingFunc),t}});o.create=function(t,e){var n=new o;return n.init(t,e),n},e.exports=o,cc._RF.pop()},{HActionTweenBase:"HActionTweenBase"}],HActionTween:[function(t,e,n){"use strict";cc._RF.push(e,"e8626SDhpZCIZBVpRkFcwcT","HActionTween");var o=cc.Class({extends:t("HActionTweenBase"),ctor:function(){},update:function(t){this._super(t);var e=this._vars,n=this.getTarget(),o=this.getProgress(),i=this._intialAttrList;for(var r in i){var c=i[r];n[r]=c+(e[r]-c)*o}},cloneSelf:function(){var t=new o;return t.init(this.getDuration(),this.getVars()),t.easing(this.easingFunc),t}});o.create=function(t,e){var n=new o;return n.init(t,e),n},e.exports=o,cc._RF.pop()},{HActionTweenBase:"HActionTweenBase"}],HAction:[function(t,e,n){"use strict";cc._RF.push(e,"84e0bbxVW5IH6aowWDSzL10","HAction"),t("HNodeEx");var o=t("HVars"),i=function(){var t=0;return function(){return"__HAction_uuid_"+t++}}(),r=cc.Class({ctor:function(){this.$uuid=i(),this._delay=0,this._state=ezaction.State.INITIAL,this._finishCallback=null,this._actionComponent=null,this.__nextAction=null,this._vars=new o,this._isStart=!1,Object.defineProperty(this,"vars",{get:function(){return this._vars}})},setTag:function(t){this._vars.tag=t},getTag:function(){return this._vars.tag},getState:function(){return this._state},isRunning:function(){return this._state===ezaction.State.RUNNING},getSpeed:function(){return this._vars.speed},setSpeed:function(t){if(!(t<=0))return this._vars.speed=t,this;cc.warn("HAction -> setSpeed: speed must be positive number")},getVars:function(){return this._vars},getNode:function(){return this._actionComponent?this._actionComponent.getTargetNode():null},getComponent:function(){return this._actionComponent},pause:function(){return this._state===ezaction.State.RUNNING&&(this._state=ezaction.State.PAUSED),this},resume:function(){return this._state===ezaction.State.PAUSED&&(this._state=ezaction.State.RUNNING),this},init:function(t){this._vars.patchParams(t)},startWithTarget:function(t){if(this._actionComponent)throw new Error("Error, HAction Had been added! ");this._actionComponent=t,this.playAction()},playAction:function(){this._state=ezaction.State.RUNNING,this._delay=this._vars.delay,this._isStart=!1},_$update:function(t){var e=this._vars;t*=e.speed,this._state===ezaction.State.RUNNING&&(this._delay-=t,this._delay<=0&&(this._isStart||(this._isStart=!0,"function"==typeof e.onStart&&e.onStart(this)),this.$update(t),this.isRunning()&&"function"==typeof e.onUpdate&&e.onUpdate(this,t)))},$update:function(t){this.update(0)},update:function(t){},$actionComplete:function(){var t=this._vars;"function"==typeof t.onComplete&&t.onComplete(this);var e=t.repeat;e>0?(this.playAction(),this.repeat(e-1)):(this._state=ezaction.State.STOPPED,"function"==typeof t.onStoped&&t.onStoped(this),this._finishCallback&&this._finishCallback(this,this.$getNextAction()),this._actionComponent&&this._actionComponent.playComplete(this))},$setFinishCallback:function(t){this._finishCallback=t},$getNextAction:function(){return this.__nextAction},$setNextAction:function(t,e){var n=9999999;"number"==typeof e&&e>-1&&(n=e);for(var o=0,i=this,r=this.__nextAction;r&&o!==n&&(i=r,r=r.__nextAction);)++o;return r&&r.destroy(),i.__nextAction=t,t},$removeNextAction:function(){this.__nextAction&&this.__nextAction.destroy(),this.__nextAction=null},then:function(t){return this.__nextAction&&this.__nextAction.$destroy(),this.__nextAction=t,this},clone:function(){for(var t=this.cloneSelf(),e=this.$getNextAction();e;)t.$setNextAction(e.cloneSelf()),e=e.$getNextAction();return t},cloneSelf:function(){return null},repeatForever:function(){return this._vars.repeat=Number.MAX_VALUE,this},repeat:function(t){return this._vars.repeat=t,this},onStart:function(t){return"function"==typeof t&&(this._vars.onStart=t),this},onUpdate:function(t){return"function"==typeof t&&(this._vars.onUpdate=t),this},onComplete:function(t){return"function"==typeof t&&(this._vars.onComplete=t),this},onStoped:function(t){return"function"==typeof t&&(this._vars.onStoped=t),this},destroy:function(){this._state!=ezaction.State.DEAD&&(this._actionComponent?(this._state=ezaction.State.DEAD,this._actionComponent.destroyAction(this)):this.$destroy())},$invalid:function(){this._state!=ezaction.State.DEAD&&(this._actionComponent?(this._state=ezaction.State.DEAD,this._actionComponent.addActionToInvalidList(this)):this.$destroy())},$destroy:function(){this._state=ezaction.State.DEAD,this._vars=null,this.__nextAction=null,this._finishCallback=null,this._actionComponent=null}});e.exports=r,cc._RF.pop()},{HNodeEx:"HNodeEx",HVars:"HVars"}],HCustomEase:[function(t,e,n){"use strict";cc._RF.push(e,"4f2d4S1LDFLHpclnFF6vLLd","HCustomEase");var o=function(){var t=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,e=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,n=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,o=/[cLlsS]/g,i="CustomEase only accepts Cubic Bezier data.",r=function t(e,n,o,i,r,c,a,s,u,h,l){var p,f=(e+o)/2,d=(n+i)/2,_=(o+r)/2,g=(i+c)/2,y=(r+a)/2,v=(c+s)/2,m=(f+_)/2,A=(d+g)/2,b=(_+y)/2,S=(g+v)/2,x=(m+b)/2,H=(A+S)/2,w=a-e,C=s-n,I=Math.abs((o-a)*C-(i-s)*w),T=Math.abs((r-a)*C-(c-s)*w);return h||(h=[{x:e,y:n},{x:a,y:s}],l=1),h.splice(l||h.length-1,0,{x:x,y:H}),(I+T)*(I+T)>u*(w*w+C*C)&&(p=h.length,t(e,n,f,d,m,A,x,H,u,h,l),t(x,H,b,S,y,v,a,s,u,h,l+1+(h.length-p))),h},c=function(t){var e=this.lookup[t*this.l|0]||this.lookup[this.l-1];return e.nx<t&&(e=e.n),e.y+(t-e.x)/e.cx*e.cy},a=function(t,e,n){this._calcEnd=!0,this.id=t,this.getRatio=c,this.setData(e,n)},s=a.prototype;return s.setData=function(c,a){var s,u,h,l,p,f,d,_,g,y,v=(c=c||"0,0,1,1").match(t),m=1,A=[];if(y=(a=a||{}).precision||1,this.data=c,this.lookup=[],this.points=A,this.fast=y<=1,(o.test(c)||-1!==c.indexOf("M")&&-1===c.indexOf("C"))&&(v=function(t){var o,r,c,a,s,u,h,l,p,f,d,_=(t+"").replace(n,function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e}).match(e)||[],g=[],y=0,v=0,m=_.length,A=2;for(o=0;o<m;o++)if(p=a,isNaN(_[o])?s=(a=_[o].toUpperCase())!==_[o]:o--,r=+_[o+1],c=+_[o+2],s&&(r+=y,c+=v),o||(h=r,l=c),"M"===a)u&&u.length<8&&(g.length-=1,A=0),y=h=r,v=l=c,u=[r,c],A=2,g.push(u),o+=2,a="L";else if("C"===a)u||(u=[0,0]),u[A++]=r,u[A++]=c,s||(y=v=0),u[A++]=y+1*_[o+3],u[A++]=v+1*_[o+4],u[A++]=y+=1*_[o+5],u[A++]=v+=1*_[o+6],o+=6;else if("S"===a)"C"===p||"S"===p?(f=y-u[A-4],d=v-u[A-3],u[A++]=y+f,u[A++]=v+d):(u[A++]=y,u[A++]=v),u[A++]=r,u[A++]=c,s||(y=v=0),u[A++]=y+=1*_[o+3],u[A++]=v+=1*_[o+4],o+=4;else{if("L"!==a&&"Z"!==a)throw i;"Z"===a&&(r=h,c=l,u.closed=!0),("L"===a||Math.abs(y-r)>.5||Math.abs(v-c)>.5)&&(u[A++]=y+(r-y)/3,u[A++]=v+(c-v)/3,u[A++]=y+2*(r-y)/3,u[A++]=v+2*(c-v)/3,u[A++]=r,u[A++]=c,"L"===a&&(o+=2)),y=r,v=c}return g[0]}(c)),4===(s=v.length))v.unshift(0,0),v.push(1,1),s=8;else if((s-2)%6)throw i;for(0==+v[0]&&1==+v[s-2]||function(t,e,n){n||0===n||(n=Math.max(+t[t.length-1],+t[1]));var o,i=-1*+t[0],r=-n,c=t.length,a=1/(+t[c-2]+i),s=-e||(Math.abs(+t[c-1]-+t[1])<.01*(+t[c-2]-+t[0])?function(t){var e,n=t.length,o=999999999999;for(e=1;e<n;e+=6)+t[e]<o&&(o=+t[e]);return o}(t)+r:+t[c-1]+r);for(s=s?1/s:-a,o=0;o<c;o+=2)t[o]=(+t[o]+i)*a,t[o+1]=(+t[o+1]+r)*s}(v,a.height,a.originY),this.rawBezier=v,l=2;l<s;l+=6)u={x:+v[l-2],y:+v[l-1]},h={x:+v[l+4],y:+v[l+5]},A.push(u,h),r(u.x,u.y,+v[l],+v[l+1],+v[l+2],+v[l+3],h.x,h.y,1/(2e5*y),A,A.length-1);for(s=A.length,l=0;l<s;l++)d=A[l],_=A[l-1]||d,d.x>_.x||_.y!==d.y&&_.x===d.x||d===_?(_.cx=d.x-_.x,_.cy=d.y-_.y,_.n=d,_.nx=d.x,this.fast&&l>1&&Math.abs(_.cy/_.cx-A[l-2].cy/A[l-2].cx)>2&&(this.fast=!1),_.cx<m&&(_.cx?m=_.cx:(_.cx=.001,l===s-1&&(_.x-=.001,m=Math.min(m,.001),this.fast=!1)))):(A.splice(l--,1),s--);if(s=1/m+1|0,this.l=s,p=1/s,f=0,d=A[0],this.fast){for(l=0;l<s;l++)g=l*p,d.nx<g&&(d=A[++f]),u=d.y+(g-d.x)/d.cx*d.cy,this.lookup[l]={x:g,cx:p,y:u,cy:0,nx:9},l&&(this.lookup[l-1].cy=u-this.lookup[l-1].y);this.lookup[s-1].cy=A[A.length-1].y-u}else{for(l=0;l<s;l++)d.nx<l*p&&(d=A[++f]),this.lookup[l]=d;f<A.length-1&&(this.lookup[l-1]=A[A.length-2])}return this._calcEnd=1!==A[A.length-1].y||0!==A[0].y,this},s.getRatio=c,a}(),i={create:function(t,e,n){return new o(t,e,n)}};e.exports=i,cc._RF.pop()},{}],HEaseDefine:[function(t,e,n){"use strict";cc._RF.push(e,"5c8c6nso71KdZ2ZxJKYS6bz","HEaseDefine");var o={};e.exports=o;o.easeIn=function(t){var e=t;return function(t){return Math.pow(t,e)}},o.easeOut=function(t){var e=t;return function(t){return Math.pow(t,1/e)}},o.easeInOut=function(t){var e=t;return function(t){var n=2*t;return n<1?.5*Math.pow(n,e):1-.5*Math.pow(2-n,e)}},o.backEaseIn=function(t){return function(t){return t*t*(2.70158*t-1.70158)}},o.easeBackOut=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.70158)||1.70158;return function(e){return(e-=1)*e*((t+1)*e+t)+1}},o.EaseElasticIn=function(t){var e=t||.3;return function(t){var n=0;if(0==t||1==t)n=t;else{var o=e/4;t-=1,n=-Math.pow(2,10*t)*Math.sin(6.283185307*(t-o)/e)}return n}},o.EaseElasticOut=function(t){var e=t||.3;return function(t){var n=0;if(0==t||1==t)n=t;else{var o=e/4;n=Math.pow(2,-10*t)*Math.sin(6.283185307*(t-o)/e)+1}return n}},o.backEaseOut=function(){return function(t){return(t-=1)*t*(2.70158*t+1.70158)+1}},o.sineEaseOut=function(){return function(t){return Math.sin(6.283185307*t)}},o.sineEaseIn=function(){return function(t){return-1*Math.cos(6.283185307*t)+1}},o.cubicEaseOut=function(){return function(t){return(t-=1)*t*t+1}},o.customEase=function(t){var e=t;return function(t){return e.getRatio(t)}},cc._RF.pop()},{}],HNodeEx:[function(t,e,n){"use strict";cc._RF.push(e,"a43164XxFxHMZs8dn2a2WWD","HNodeEx");var o=t("HActionComponent"),i=cc.Node.prototype;i.RunAction=function(t){if(this._components){var e=this.getComponent(o);return e||(this.addComponent(o),(e=this.getComponent(o)).__$init(this)),e.addActionToTickQueue(t),t}},i.RemoveAction=function(t){if(this._components){var e=this.getComponent(o);e&&e.removeAction(t)}},i.RemoveActionByTag=function(t){if(this._components){var e=this.GetActionByTag(t);e&&this.RemoveAction(e)}},i.RemoveAllActions=function(){if(this._components){var t=this.getComponent(o);t&&t.removeAllActions()}},i.StopAllActions=i.RemoveAllActions,i.GetRunningActions=function(){if(!this._components)return[];var t=this.getComponent(o);return t?t.getRunningActions():[]},i.GetActionByTag=function(t){if(!this._components)return null;var e=this.getComponent(o);return e?e.getActionByTag(t):null},i.RemoveEZActionComponent=function(){this.removeComponent(o)},cc._RF.pop()},{HActionComponent:"HActionComponent"}],HVars:[function(t,e,n){"use strict";cc._RF.push(e,"17a79sQmjZAmb/OJyWs7wsd","HVars");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){this.tag=0,this.speed=1,this.repeat=0,this.delay=0};i.prototype.clone=function(t){for(var e=t||{},n=Object.keys(this),i=0;i<n.length;i++){var r=n[i];o(this[r]);if(this[r]instanceof Array){e[r]=[];for(var c=0;c<this[r].length;c++)e[r][c]=this[r][c]}else e[r]=this[r]}return e},i.prototype.patchParams=function(t){if(t)if(t instanceof i)t.clone(this);else for(var e in t)this[e]=t[e]},e.exports=i,cc._RF.pop()},{}],IGame:[function(t,e,n){"use strict";cc._RF.push(e,"7d8d2V69C1OWoxIo7zznw3K","IGame"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ILayout:[function(t,e,n){"use strict";cc._RF.push(e,"861c82ZH5NIoYVakrDB88Xw","ILayout"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IMathVec:[function(t,e,n){"use strict";cc._RF.push(e,"36d56lmxKJLm44XYDEXz8DZ","IMathVec"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],IScoreManager:[function(t,e,n){"use strict";cc._RF.push(e,"3ac56OC8K5O24lizye3b8oR","IScoreManager"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],ITouchFront:[function(t,e,n){"use strict";cc._RF.push(e,"9cafcPWqOtLEJ6X3LYzgEew","ITouchFront"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Layout:[function(t,e,n){"use strict";cc._RF.push(e,"3ac41bWtadIhbxvIIe9zzBb","Layout"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Model"),i=t("./MathVec"),r=function(){function t(t){var e=this;return this.blockScale=1,this.color={2:cc.color(237,241,21,255),4:cc.color(241,180,21,255),8:cc.color(171,241,21,255),16:cc.color(149,160,216,255),32:cc.color(187,149,216,255),64:cc.color(216,149,209,255),128:cc.color(28,118,156,255),256:cc.color(16,74,99,255),512:cc.color(168,85,25,255),1024:cc.color(236,122,38,255),2048:cc.color(236,86,33,255)},this.initEdge=function(t,n){return void 0===n&&(n=1),e.edge=t,e.origin=cc.v2(t.width.start*n,-t.width.start*n),e.width=(e.edge.width.end-e.edge.width.start)*n,e.height=(e.edge.height.end-e.edge.height.start)*n,e},this.background=t,this}return t.prototype.setBlockScale=function(t){return this.blockScale=t,this},t.prototype.draw=function(t){var e=this,n=this.width/(t[0].length-1),r=this.height/(t.length-1);o.default.getInstance().clearNodeList(),i.visitArray(t,function(i,c){if(0!==t[i][c]){var a=cc.v2(e.origin.x+n*c,e.origin.y-r*i),s=o.default.getInstance().getBlock();s.setParent(e.background),s.setScale(e.blockScale),s.setPosition(a),e.setNodeTarget(s,{raw:i,col:c}),s.getChildByName("label").getComponent(cc.Label).string=String(t[i][c]),s.color=e.color[String(t[i][c])],o.default.getInstance().saveNode(s)}})},t.prototype.action=function(t,e,n,o){var r=this;i.visitArray(e,function(i,c){var a=r.width/(e[0].length-1),s=r.height/(e.length-1);0!==e[i][c]&&r.getNodeByTarget(r.background,{raw:i,col:c}).RunAction(r.getAction(t,{deltaX:e[i][c]*a,deltaY:e[i][c]*s},o).easing(ezaction.ease.cubicEaseOut(1))).onStoped(n)})},t.prototype.getAction=function(t,e,n){switch(void 0===n&&(n=.5),t){case"left":return ezaction.moveBy(n,cc.v2(-e.deltaX,0));case"right":return ezaction.moveBy(n,cc.v2(e.deltaX,0));case"up":return ezaction.moveBy(n,cc.v2(0,e.deltaY));case"down":return ezaction.moveBy(n,cc.v2(0,-e.deltaY));default:throw new Error("action command error")}},t.prototype.setNodeTarget=function(t,e){t.name=String(e.raw+""+e.col)},t.prototype.getNodeByTarget=function(t,e){return t.getChildByName(String(e.raw+""+e.col))},t}();n.default=r,cc._RF.pop()},{"./MathVec":"MathVec","./Model":"Model"}],MathVec:[function(t,e,n){"use strict";cc._RF.push(e,"52e985goOdDtZl/ZcjFtyDc","MathVec"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,n){this.start=t,this.step=e,this.num=n}return t.prototype.randPos=function(){var t=this.start+parseInt(String(Math.random()*this.num))*this.step;return cc.v2(t,t)},t.prototype.randVaule=function(){return this.start+parseInt(String(Math.random()*this.num*this.step))},t}();function i(t){for(var e=new Array,n=t.length,o=0;o<n;o++){e.push([]);for(var i=t[o].length,r=0;r<i;r++)e[o][r]=t[r][o]}return e}function r(t){return parseInt(String(t))}function c(t){for(var e=t.length,n=!1,o=0;o<e-1;o++)if(t[o]===t[o+1]){n=!0;break}return n}function a(t){for(var e=!1,n=0,o=t;n<o.length;n++){if(e=c(o[n]))break}return e}n.default=o,n.transformArray=i,n.visitArray=function(t,e){for(var n=t.length,o=0;o<n;o++)for(var i=t[o].length,r=0;r<i;r++)e(o,r)},n.visitArrayRand=function(t,e){var n=r(Math.random()*t.length);e(n,r(Math.random()*t[n].length))},n.moreFunc=function(t,e){void 0===e&&(e=1);var n=0,o=function(){n>=e||(n++,t(),o())};o()},n.toInt=r,n.randFunc=function(t,e){void 0===e&&(e=1.5);var n=Boolean(r(Math.random()*e));n&&t(n)},n.alterArray=function(t,e){t[e.raw][e.col]=e.value},n.computed=function(t,e,n){var o;switch(e){case"+":o=cc.v2(t.x+n.x,t.y+n.y);break;case"-":o=cc.v2(t.x-n.x,t.y-n.y);break;case"*":o=cc.v2(t.x*n.x,t.y*n.y);break;case"/":o=cc.v2(t.x/n.x,t.y/n.y);break;default:throw new Error("computed method unknown")}return o},n.PointList=function(){return new Array},n.judgePos=function(t,e){return t.x===e.x&&t.y===e.y},n.fillArray=function(t,e){void 0===e&&(e=1);for(var n=new Array,o=0;o<e;o++)n.push(t);return n},n.fillArraySuper=function(t,e){for(var n=new Array,o=0;o<e.raw;o++){n.push([]);for(var i=0;i<e.col;i++)n[o][i]=t}return n},n.hasTwice=c,n.testRows=a,n.hasTwiceSuper=function(t){var e,n;return e=a(t),n=a(i(t)),e||n},cc._RF.pop()},{}],Model:[function(t,e,n){"use strict";cc._RF.push(e,"b73914aW/NNkYUN5R1ykRc4","Model"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this._BlockPool=new cc.NodePool,this._layoutCache=new cc.NodePool,this._nodeList=new Array}return t.getInstance=function(){return this.instance=this.instance?this.instance:new t,this.instance},t.prototype.initPool=function(t,e){for(var n=0;n<e;++n){var o=cc.instantiate(t);this._BlockPool.put(o)}return this._prafab=t,this},t.prototype.initPreLayout=function(t){var e=cc.instantiate(t);return this._layoutCache.put(e),this},t.prototype.getPreLayout=function(){return this._layoutCache.size()>0?this._layoutCache.get():null},t.prototype.returnPreLayout=function(t){this._layoutCache.put(t)},Object.defineProperty(t.prototype,"NodeList",{get:function(){return this._nodeList},enumerable:!0,configurable:!0}),t.prototype.getBlock=function(){return this._BlockPool.size()>0?this._BlockPool.get():cc.instantiate(this._prafab)},t.prototype.saveNode=function(t){this._nodeList.push(t)},t.prototype.getLayerNode=function(){return this._playLayer},t.prototype.saveLayerNode=function(t){this._playLayer=t},t.prototype.clearNodeList=function(){for(var t=0,e=this._nodeList;t<e.length;t++){var n=e[t];this._BlockPool.put(n),this._nodeList=[]}},t.prototype.ClearPool=function(){this._nodeList=[],this._BlockPool.clear(),this._layoutCache.clear(),this._playLayer.destroy()},t}();n.default=o,cc._RF.pop()},{}],PlayLayer:[function(t,e,n){"use strict";cc._RF.push(e,"6da04JjlNVHKr2BHpKtrKVk","PlayLayer"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,c=t("./TouchBlock"),a=t("./TouchFront"),s=t("./Layout"),u=t("./Model"),h=t("./Data"),l=t("./SceneMediator"),p=t("./ScoreManager"),f=t("./Game"),d=t("./State"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.background=null,e.layout=null,e.blockPrefab=null,e.gameEnd=null,e.score=null,e.bestScore=null,e.backBtn=null,e.edge=null,e.layoutType=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t;t=[f.default.edge,f.default.type[d.default.getInstance().layoutTypeIndex]],this.edge=t[0],this.layoutType=t[1],u.default.getInstance().initPool(this.blockPrefab,this.layoutType.num).initPreLayout(this.gameEnd),h.default.getInstance().init(this.layoutType.size,2048).addRand(2),this.bestScore.string=String(d.default.getInstance().bestScore),l.default.getInstance().resetScale(.9)},e.prototype.start=function(){var t=this;this.backBtn.node.on("click",function(){l.default.getInstance().go(-1,void 0,void 0,void 0,function(){t.onDestroy()})});var e=new s.default(this.layout.node);e.initEdge(this.edge,this.layoutType.edgeScale).setBlockScale(this.layoutType.blockScale).draw(h.default.getInstance().data),new c.default(new a.default(this.background.node),e,this.score,this.bestScore,new p.default(this.score)).load()},e.prototype.onDestroy=function(){u.default.getInstance().ClearPool()},__decorate([r(cc.Sprite)],e.prototype,"background",void 0),__decorate([r(cc.Sprite)],e.prototype,"layout",void 0),__decorate([r(cc.Prefab)],e.prototype,"blockPrefab",void 0),__decorate([r(cc.Prefab)],e.prototype,"gameEnd",void 0),__decorate([r(cc.Label)],e.prototype,"score",void 0),__decorate([r(cc.Label)],e.prototype,"bestScore",void 0),__decorate([r(cc.Button)],e.prototype,"backBtn",void 0),e=__decorate([i],e)}(cc.Component);n.default=_,cc._RF.pop()},{"./Data":"Data","./Game":"Game","./Layout":"Layout","./Model":"Model","./SceneMediator":"SceneMediator","./ScoreManager":"ScoreManager","./State":"State","./TouchBlock":"TouchBlock","./TouchFront":"TouchFront"}],SceneMediator:[function(t,e,n){"use strict";cc._RF.push(e,"e573c4kbI9H7JynK3cG3EQE","SceneMediator"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./CameraManager"),i=function(){function t(){}return t.getInstance=function(){return this.instance=this.instance?this.instance:new t,this.instance},t.prototype.go=function(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=1),o.default.getInstance().go(t,function(t,o){t.RunAction(ezaction.moveBy(n,cc.v2(0,0))).onStart(e).then(ezaction.moveTo(i,o).easing(ezaction.ease.easeBackOut(1)).onStoped(r))})},t.prototype.goto=function(t,e,n,o){void 0===t&&(t=1),void 0===e&&(e=.9),void 0===n&&(n=1),this.go(1,function(){cc.Canvas.instance.node.RunAction(ezaction.scaleTo(t,{scale:e}).easing(ezaction.ease.backEaseOut(1)))},t,n,o)},t.prototype.backto=function(t,e,n){void 0===t&&(t=1),void 0===e&&(e=1),this.go(-1,void 0,0,e,function(){cc.Canvas.instance.node.RunAction(ezaction.scaleTo(t,{scale:1}).easing(ezaction.ease.backEaseOut(1))).onStoped(n)})},t.prototype.reload=function(){var t=cc.Canvas.instance.node.scale;o.default.getInstance().reload(1,function(){cc.Canvas.instance.node.scale=t})},t.prototype.resetScale=function(t){void 0===t&&(t=1),cc.Canvas.instance.node.scale!==t&&cc.Canvas.instance.node.setScale(t)},t}();n.default=i,cc._RF.pop()},{"./CameraManager":"CameraManager"}],ScoreManager:[function(t,e,n){"use strict";cc._RF.push(e,"f2d67ewHqBIQp0/WrC4ccBN","ScoreManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){return this.score=t,this.p_ori=this.score.node.children[0].position,this.score.node.children[0].opacity=0,this}return t.prototype.play=function(t){var e=this;this.score.node.children[0].RunAction(this.action()).onStart(function(){e.score.node.children[0].opacity=255,e.score.node.children[0].getComponent(cc.Label).string="+"+String(t)}).onStoped(function(){e.score.node.children[0].setPosition(e.p_ori),e.score.node.children[0].opacity=0})},t.prototype.action=function(){return ezaction.sequence([ezaction.spawn([ezaction.moveBy(.5,cc.v2(0,10)),ezaction.fadeOut(.5)]),ezaction.fadeIn(0)])},t}();n.default=o,cc._RF.pop()},{}],Select:[function(t,e,n){"use strict";cc._RF.push(e,"50c83JUUCVIfoUZkKImsbKI","Select"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,c=t("./State"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.left=null,e.right=null,e.currentList=[],e.currentIndex=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.currentIndex=1,this.updateCurrent()},e.prototype.start=function(){var t=this;this.left.on("touchstart",function(){t.currentIndex>0&&t.currentIndex--,t.updateCurrent()}),this.right.on("touchstart",function(){t.currentIndex<t.currentList.length-1&&t.currentIndex++,t.updateCurrent()})},e.prototype.updateCurrent=function(){for(var t=0,e=this.currentList;t<e.length;t++){e[t].node.active=!1}if(!(this.currentIndex>=0&&this.currentIndex<this.currentList.length))throw new Error("current select error: "+this.currentIndex);this.currentList[this.currentIndex].node.active=!0,c.default.getInstance().layoutTypeIndex=this.currentIndex},__decorate([r(cc.Node)],e.prototype,"left",void 0),__decorate([r(cc.Node)],e.prototype,"right",void 0),__decorate([r([cc.Label])],e.prototype,"currentList",void 0),e=__decorate([i],e)}(cc.Component);n.default=a,cc._RF.pop()},{"./State":"State"}],StartLayer:[function(t,e,n){"use strict";cc._RF.push(e,"de82c+cpMlP24+Pofcvt7Me","StartLayer"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,c=t("./SceneMediator"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.background=null,e.isTouchOnce=!0,e}return __extends(e,t),e.prototype.start=function(){var t=this;this.background.on("touchend",function(){t.isTouchOnce&&c.default.getInstance().goto(.7,void 0,.4,function(){t.isTouchOnce=!0}),t.isTouchOnce=!1})},__decorate([r(cc.Node)],e.prototype,"background",void 0),e=__decorate([i],e)}(cc.Component);n.default=a,cc._RF.pop()},{"./SceneMediator":"SceneMediator"}],State:[function(t,e,n){"use strict";cc._RF.push(e,"4ec7dyeUJFG3JhRNL95tD0l","State"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this._layoutTypeIndex=0,this._bestScore=0}return t.getInstance=function(){return this.instance=this.instance?this.instance:new t,this.instance},Object.defineProperty(t.prototype,"layoutTypeIndex",{get:function(){return this._layoutTypeIndex},set:function(t){this._layoutTypeIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bestScore",{get:function(){return this._bestScore},set:function(t){this._bestScore=t},enumerable:!0,configurable:!0}),t}();n.default=o,cc._RF.pop()},{}],TouchBlock:[function(t,e,n){"use strict";cc._RF.push(e,"a62381K96BOl7qvrU1EULJ5","TouchBlock"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Data"),i=t("./Model"),r=t("./CameraManager"),c=t("./State"),a=function(){function t(t,e,n,a,s){var u=this;this.load=function(){u.touchFront.submit(u.left,u.right,u.up,u.down).listen()},this.left=function(){u.layoutStep("left")},this.right=function(){u.layoutStep("right")},this.up=function(){u.layoutStep("up")},this.down=function(){u.layoutStep("down")},this.testResult=function(){u._score.string=String(u.DataStn.score),c.default.getInstance().bestScore<Number(u._score.string)&&(c.default.getInstance().bestScore=Number(u._score.string),u._bestScore.string=u._score.string),u.DataStn.updateValue&&u.scoreUpdate.play(u.DataStn.updateValue),u.DataStn.result?(u.isWinOnce&&(u.gameEnd(),u.isWinOnce=!u.isWinOnce),u._score.string=String(u.DataStn.score-1)):u.DataStn.isFull&&(u.DataStn.hasTwice||(u._score.string=String(u.DataStn.score),u.gameEnd()))},this.gameEnd=function(){var t=i.default.getInstance().getPreLayout();null!==t&&t.setParent(r.default.getInstance().CurrentLayer)},this.touchFront=t,this.layout=e,this.scoreUpdate=s,this._score=n,this.isWinOnce=!0,this.DataStn=o.default.getInstance(),this._bestScore=a}return t.prototype.layoutStep=function(t,e){var n=this;void 0===e&&(e=.2);var o=this.DataStn.merge(t);this.layout.action(t,o,function(){n.layout.draw(n.DataStn.data),n.testResult()},e),this.DataStn.isChanged&&this.DataStn.addRand()},t}();n.default=a,cc._RF.pop()},{"./CameraManager":"CameraManager","./Data":"Data","./Model":"Model","./State":"State"}],TouchFront:[function(t,e,n){"use strict";cc._RF.push(e,"90bc9BwWzRL14heBNXWZVog","TouchFront"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(t,e,n){void 0===e&&(e=100),void 0===n&&(n=200);var o=this;this.submit=function(t,e,n,i){return o.callbackLeft=t,o.callbackRight=e,o.callbackUp=n,o.callbackDown=i,o},this.listen=function(){var t;o.node.on(cc.Node.EventType.TOUCH_START,function(e){return t=e.getLocation()}),o.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){o._lock++}),o.node.on(cc.Node.EventType.TOUCH_END,function(e){o._lock<o.delta&&o.testPos(t,e.getLocation()),o._lock=0}),o.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){o._lock<o.delta&&o.testPos(t,e.getLocation()),o._lock=0})},this.testPos=function(t,e){Math.abs(e.x-t.x)<o.offset&&Math.abs(e.y-t.y)<o.offset||(Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?e.x-t.x>o.offset?o.callbackRight&&o.callbackRight():e.x-t.x<-o.offset&&o.callbackLeft&&o.callbackLeft():e.y-t.y>o.offset?o.callbackUp&&o.callbackUp():e.y-t.y<-o.offset&&o.callbackDown&&o.callbackDown())},this.node=t,this.offset=e,this._lock=0,this.delta=n}}();n.default=o,cc._RF.pop()},{}],ezaction:[function(t,e,n){"use strict";cc._RF.push(e,"c21618Z9jxPKo1Aqh68SLIU","ezaction");var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=i||{};e.exports=i,window&&"object"===("undefined"==typeof window?"undefined":o(window))&&(window.ezaction=i),i.State={INITIAL:0,RUNNING:1,PAUSED:2,STOPPED:3,DEAD:4},i.HVars=t("HVars"),i.ease=t("HEaseDefine"),i.HAction=t("HAction"),i.HActionInstant=t("HActionInstant"),i.HActionInterval=t("HActionInterval"),i.HActionTween=t("HActionTween"),i.HActionTweenBy=t("HActionTweenBy"),i.HActionSpawn=t("HActionSpawn"),i.HActionSequence=t("HActionSequence"),i.HActionJumpBy=t("HActionJump").jumpBy,i.HActionJumpTo=t("HActionJump").jumpTo,i.HCustomEase=t("HCustomEase");var r=function(t){var e={};for(var n in t){var o=t[n];"number"==typeof o&&(e[n]=o)}return e};i.v2=function(t,e){return"number"==typeof t?{x:t,y:e}:{x:t.x,y:t.y}},i.callFuncWithParam=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];var r={onComplete:function(){t.apply(void 0,n)}};return i.HActionInstant.create(r)},i.callFunc=function(t,e,n){return(n=n||{}).onComplete=function(){t(e)},i.HActionInstant.create(n)},i.delay=function(t,e){return i.HActionInterval.create(t,e)},i.delayTime=i.delay,i.sequence=function(t,e){return i.HActionSequence.create(t,e)},i.spawn=function(t,e){return i.HActionSpawn.create(t,e)},i.tween=function(t,e,n){e=r(e);var o=n;if(o)for(var c in e)o[c]=e[c];else o=e||{};return i.HActionTween.create(t,o)},i.tweenBy=function(t,e,n){e=r(e);var o=n;if(o)for(var c in e)o[c]=e[c];else o=e||{};return i.HActionTweenBy.create(t,o)},i.moveTo=i.tween,i.moveBy=i.tweenBy,i.scaleTo=i.tween,i.scaleBy=i.tweenBy,i.skewTo=i.tween,i.skewBy=i.tweenBy,i.rotateBy=function(t,e,n){var o=null;return"number"==typeof e?((o={}).rotationX=e,o.rotationY=e):o=e,i.tweenBy(t,o,n)},i.rotateTo=function(t,e,n){var o=null;return"number"==typeof e?((o={}).rotationX=e,o.rotationY=e):o=e,i.tween(t,o,n)},i.fadeTo=function(t,e,n){var o={};return o.opacity=e,i.tween(t,o,n)},i.fadeIn=function(t,e){return i.fadeTo(t,255,e)},i.fadeOut=function(t,e){return i.fadeTo(t,0,e)},i.show=function(t){t=t||{};var e=new i.HActionInstant;return t.onComplete=function(t){t.getNode()._sgNode.setVisible(!0)},e.init(t),e},i.hide=function(t){t=t||{};var e=new i.HActionInstant;return t.onComplete=function(t){t.getNode()._sgNode.setVisible(!1)},e.init(t),e},i.jumpBy=function(t,e,n,o,r){var c=new i.HActionJumpBy;return c.init(t,e,n,o,r),c},i.jumpTo=function(t,e,n,o,r){var c=new i.HActionJumpTo;return c.init(t,e,n,o,r),c},cc._RF.pop()},{HAction:"HAction",HActionInstant:"HActionInstant",HActionInterval:"HActionInterval",HActionJump:"HActionJump",HActionSequence:"HActionSequence",HActionSpawn:"HActionSpawn",HActionTween:"HActionTween",HActionTweenBy:"HActionTweenBy",HCustomEase:"HCustomEase",HEaseDefine:"HEaseDefine",HVars:"HVars"}]},{},["HActionInstant","HActionInterval","HActionJump","HActionTween","HActionTweenBase","HActionTweenBy","HCustomEase","HEaseDefine","HAction","HActionComponent","HActionEngine","HActionSequence","HActionSpawn","HNodeEx","HVars","ezaction","Camera","CameraManager","ConnectLayer","Data","EndLayout","Game","IGame","ILayout","IMathVec","IScoreManager","ITouchFront","Layout","MathVec","Model","PlayLayer","SceneMediator","ScoreManager","Select","StartLayer","State","TouchBlock","TouchFront"]);