require=function r(s,l,a){function c(n,t){if(!l[n]){if(!s[n]){var i="function"==typeof require&&require;if(!t&&i)return i(n,!0);if(u)return u(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var e=l[n]={exports:{}};s[n][0].call(e.exports,function(t){return c(s[n][1][t]||t)},e,e.exports,r,s,l,a)}return l[n].exports}for(var u="function"==typeof require&&require,t=0;t<a.length;t++)c(a[t]);return c}({HelloWorld:[function(t,n,i){"use strict";cc._RF.push(n,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},update:function(t){}}),cc._RF.pop()},{}],RandPlat:[function(t,n,i){"use strict";cc._RF.push(n,"b25f2M/QQdD5KiUwF5tEnMt","RandPlat"),cc.Class({extends:cc.Component,properties:{gifts:{default:[],type:[cc.Sprite]},plat:cc.Node,inforLabel:cc.Label,resultLayout:cc.Node},originRota:null,animPlay:null,giftOrder:null,resultLabel:null,lastAngle:null,onLoad:function(){this.originRota=this.plat.rotation,this.animPlay=this.plat.getComponent(cc.Animation),this.resultLabel=this.resultLayout.getChildByName("result").getComponent(cc.Label),this.lastAngle=this.originRota},start:function(){this.plat.on("touchstart",function(){cc.log("click"),this.startPlay()},this)},update:function(t){this.giftOrder=this.inforRotation(this.plat.rotation-this.originRota),this.highLightGift(this.giftOrder),this.getResult()},randAngle:function(){return parseInt(360*cc.random0To1())},startPlay:function(){cc.log("startPlay");var t=this.animPlay.play("rotationStart");this.getAngleClip(t)[0]=this.lastAngle,this.inforLabel.string="等待\n结果",this.scheduleOnce(function(){this.processPlay()},t.duration)},processPlay:function(){cc.log("stateProcess");var t=this.animPlay.play("rotating");this.scheduleOnce(function(){this.finishPlay()},t.duration)},getAngleClip:function(t){return t.curves[0].values},finishPlay:function(){cc.log("finishPlay");var t=this.animPlay.play("rotationFinish");this.getAngleClip(t)[1]=this.originRota+this.randAngle(),this.scheduleOnce(function(){this.inforLabel.string="再次\n抽奖",this.lastAngle=this.getAngleClip(t)[1]},t.duration)},getRounds:function(t){return parseInt(t/360)},inforRotation:function(t){var n=t-360*this.getRounds(t);return parseInt(n/(360/this.gifts.length))},refreshColor:function(){for(var t=0;t<this.gifts.length;t++)this.gifts[t].node.color=cc.Color.WHITE},highLightGift:function(t){this.refreshColor(),this.gifts[t].node.color=cc.Color.GREEN},getResult:function(){this.resultLabel.string=this.giftOrder+1}}),cc._RF.pop()},{}]},{},["HelloWorld","RandPlat"]);