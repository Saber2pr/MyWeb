window.__require=function e(t,o,r){function n(c,a){if(!o[c]){if(!t[c]){var u=c.split("/");if(u=u[u.length-1],!t[u]){var d="function"==typeof __require&&__require;if(!a&&d)return d(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+c+"'")}}var h=o[c]={exports:{}};t[c][0].call(h.exports,function(e){return n(t[c][1][e]||e)},h,h.exports,e,t,o,r)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<r.length;c++)n(r[c]);return n}({Changed:[function(e,t,o){"use strict";cc._RF.push(t,"b3cc3Xre1VNfZcxBIWG+/9Q","Changed"),Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.onChanged=function(e,t){this._last!==e&&t(),this._last=e},e}();o.default=r,cc._RF.pop()},{}],EdgeJudger:[function(e,t,o){"use strict";cc._RF.push(t,"c52e8K5kBZGx6edICEYefYy","EdgeJudger"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./MathVec"),n=e("./NodeVec"),i=e("./Changed"),c=function(){function e(e,t){this.moveNode=e,this.staticNode=t,this.changed=new i.default}return e.prototype.step=function(e){var t=this;this.changed.onChanged(e,function(){var o=t.staticNode.filter(function(e){return t.judge(t.moveNode,e)});if(1===o.length){n.toBlack(t.moveNode);var i=t.getLimitedPos(e,o[0],t.moveNode);t.moveNode.setPosition(t.getPos(t.moveNode,o[0],e,i))}else if(2===o.length){var c=e,a=void 0,u=void 0;o[0].zIndex>o[1].zIndex?(u=o[0],a=o[1]):(u=o[1],a=o[0]);var d=r.getAround(t.moveNode,a),h=r.getAround(t.moveNode,u);switch(r.getQuad(e,a,u)){case 1:c=cc.v2(r.addMin(e.x,d.x.max),r.addMin(e.y,h.y.max));break;case 2:c=cc.v2(r.addMax(e.x,d.x.min),r.addMin(e.y,h.y.max));break;case 3:c=cc.v2(r.addMax(e.x,d.x.min),r.addMax(e.y,h.y.min));break;case 4:c=cc.v2(r.addMin(e.x,d.x.max),r.addMax(e.y,h.y.min))}t.moveNode.setPosition(c)}else n.toWhite(t.moveNode),t.moveNode.setPosition(e)})},e.prototype.getPos=function(e,t,o,i){var c;return this.inMoveSize(t,e,function(t,a,u,d){r.isIn(o.x,t)&&!r.isIn(o.y,d)?c=cc.v2(o.x,i.y):r.isIn(o.y,u)&&!r.isIn(o.x,a)?c=cc.v2(i.x,o.y):(n.toRed(e),c=o)}),c},e.prototype.getLimitedPos=function(e,t,o){var r,n;return r=e.y<t.y+t.height/2+o.height/2&&e.y>t.y-t.height/2-o.height/2?e.y<t.y?t.y-t.height/2-o.height/2:t.y+t.height/2+o.height/2:e.y,n=e.x<t.x+t.width/2+o.width/2&&e.x>t.x-t.width/2-o.width/2?e.x<t.x?t.x-t.width/2-o.width/2:t.x+t.width/2+o.width/2:e.x,cc.v2(n,r)},e.prototype.inMoveSize=function(e,t,o){o(cc.v2(e.x-e.width/2-t.width/2,e.x+e.width/2+t.width/2),cc.v2(e.x-e.width/2,e.x+e.width/2),cc.v2(e.y-e.height/2-t.height/2,e.y+e.height/2+t.height/2),cc.v2(e.y-e.height/2,e.y+e.height/2))},e.prototype.judge=function(e,t){var o=e.width/2+t.width/2,n=e.height/2+t.height/2,i=r.reduceVec2(e.getParent().convertToWorldSpaceAR(e.getPosition()),t.getParent().convertToWorldSpaceAR(t.getPosition()));return!(Math.abs(i.x)>o||Math.abs(i.y)>n)},e}();o.default=c,cc._RF.pop()},{"./Changed":"Changed","./MathVec":"MathVec","./NodeVec":"NodeVec"}],MathVec:[function(e,t,o){"use strict";cc._RF.push(t,"a98c3YOuYpC3IiunXck+e4C","MathVec"),Object.defineProperty(o,"__esModule",{value:!0}),o.reduceVec2=function(e,t){return cc.v2(e.x-t.x,e.y-t.y)},o.isIn=function(e,t){return e<t.y&&e>t.x},o.addMax=function(e,t){return e<t?e:t},o.addMin=function(e,t){return e>t?e:t},o.getQuad=function(e,t,o){var r=e.x-t.x,n=e.y-o.y;return r>0?n>0?1:4:n>0?2:3},o.getAround=function(e,t){return{x:{min:t.x-t.width/2-e.width/2,max:t.x+t.width/2+e.width/2},y:{min:t.y-t.height/2-e.height/2,max:t.y+t.height/2+e.height/2}}},o.limitToCircle=function(e,t){return o.getLength(e)<t?e:o.getPos(o.getAngle(e),t)},o.getAngle=function(e){return e.y>0?Math.acos(e.x/e.mag()):-Math.acos(e.x/e.mag())},o.getPos=function(e,t){return cc.v2(t*Math.cos(e),t*Math.sin(e))},o.getLength=function(e){return e.mag()};var r=function(){function e(e,t,o){this.start=e,this.step=t,this.num=o}return e.prototype.randPos=function(){var e=this.start+parseInt(String(Math.random()*this.num))*this.step;return cc.v2(e,e)},e.prototype.randVaule=function(){return this.start+parseInt(String(Math.random()*this.num*this.step))},e}();function n(e){for(var t=new Array,o=e.length,r=0;r<o;r++){t.push([]);for(var n=e[r].length,i=0;i<n;i++)t[r][i]=e[i][r]}return t}function i(e){return parseInt(String(e))}function c(e){for(var t=e.length,o=!1,r=0;r<t-1;r++)if(e[r]===e[r+1]){o=!0;break}return o}function a(e){for(var t=!1,o=0,r=e;o<r.length;o++){if(t=c(r[o]))break}return t}o.default=r,o.transformArray=n,o.visitArray=function(e,t){for(var o=e.length,r=0;r<o;r++)for(var n=e[r].length,i=0;i<n;i++)t(r,i)},o.visitArrayRand=function(e,t){var o=i(Math.random()*e.length);t(o,i(Math.random()*e[o].length))},o.moreFunc=function(e,t){void 0===t&&(t=1);var o=0,r=function(){o>=t||(o++,e(),r())};r()},o.toInt=i,o.randFunc=function(e,t){void 0===t&&(t=1.5);var o=Boolean(i(Math.random()*t));o&&e(o)},o.alterArray=function(e,t){e[t.raw][t.col]=t.value},o.computed=function(e,t,o){var r;switch(t){case"+":r=cc.v2(e.x+o.x,e.y+o.y);break;case"-":r=cc.v2(e.x-o.x,e.y-o.y);break;case"*":r=cc.v2(e.x*o.x,e.y*o.y);break;case"/":r=cc.v2(e.x/o.x,e.y/o.y);break;default:throw new Error("computed method unknown")}return r},o.PointList=function(){return new Array},o.judgePos=function(e,t){return e.x===t.x&&e.y===t.y},o.fillArray=function(e,t){void 0===t&&(t=1);for(var o=new Array,r=0;r<t;r++)o.push(e);return o},o.fillArraySuper=function(e,t){for(var o=new Array,r=0;r<t.raw;r++){o.push([]);for(var n=0;n<t.col;n++)o[r][n]=e}return o},o.hasTwice=c,o.testRows=a,o.hasTwiceSuper=function(e){var t,o;return t=a(e),o=a(n(e)),t||o},cc._RF.pop()},{}],MoveBoot:[function(e,t,o){"use strict";cc._RF.push(t,"2b219tK5zhG/aM+QEkYIKoZ","MoveBoot"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./MoveCtrllor"),n=e("./NodeProxy"),i=cc._decorator,c=i.ccclass,a=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.basicSpr=null,t.touchSpr=null,t.radius=25,t.heroSpeed=5,t}return __extends(t,e),t.prototype.onLoad=function(){r.default.getInstance().init(this.basicSpr,this.touchSpr,this.radius,this.heroSpeed)},t.prototype.update=function(){r.default.getInstance().step(n.default.hero)},__decorate([a({type:cc.Node,displayName:"\u6447\u6746\u76d8"})],t.prototype,"basicSpr",void 0),__decorate([a({type:cc.Node,displayName:"\u6447\u6746\u62d6\u52a8\u70b9"})],t.prototype,"touchSpr",void 0),__decorate([a({type:cc.Integer,displayName:"\u62d6\u52a8\u534a\u5f84",tooltip:"\u9ed8\u8ba425"})],t.prototype,"radius",void 0),__decorate([a({type:cc.Integer,displayName:"\u89d2\u8272\u79fb\u52a8\u901f\u5ea6",tooltip:"\u9ed8\u8ba45",slide:!0,min:1,max:15,step:1})],t.prototype,"heroSpeed",void 0),t=__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./MoveCtrllor":"MoveCtrllor","./NodeProxy":"NodeProxy"}],MoveCtrllor:[function(e,t,o){"use strict";cc._RF.push(t,"4333apLkR9O35BS7w7lM6CE","MoveCtrllor"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./MathVec"),n=e("./NodeProxy"),i=function(){function e(){}return e.getInstance=function(){return this.instance=this.instance?this.instance:new e,this.instance},e.prototype.refresh=function(e){this.angle=0,this.status=!1,e.setPosition(0,0)},e.prototype.init=function(e,t,o,n){var i=this;void 0===o&&(o=25),void 0===n&&(n=5),this.refresh(t),this.radius=o,this.heroSpeed=n,e.on("touchstart",function(){i.status=!0}),e.on("touchmove",function(o){var n=e.convertToNodeSpaceAR(o.getLocation()),c=r.limitToCircle(n,i.radius);t.setPosition(c),i.angle=r.getAngle(c)}),e.on("touchend",function(){i.refresh(t)}),e.on("touchcancel",function(){i.refresh(t)})},Object.defineProperty(e.prototype,"speed",{get:function(){return this.heroSpeed},set:function(e){this.heroSpeed=e},enumerable:!0,configurable:!0}),e.prototype.step=function(e){if(!0===this.status){var t=this.angle,o=cc.v2(e.x+this.heroSpeed*Math.cos(t),e.y+this.heroSpeed*Math.sin(t));n.default.heroPos=o}},e}();o.default=i,cc._RF.pop()},{"./MathVec":"MathVec","./NodeProxy":"NodeProxy"}],NodeProxy:[function(e,t,o){"use strict";cc._RF.push(t,"c98de/i0ylD+YW2Bm7qDMQN","NodeProxy"),Object.defineProperty(o,"__esModule",{value:!0});var r={edge:void 0,hero:void 0,heroPos:void 0};o.default=r,cc._RF.pop()},{}],NodeVec:[function(e,t,o){"use strict";cc._RF.push(t,"9337d+u8YFL1IW3fz3qUR8D","NodeVec"),Object.defineProperty(o,"__esModule",{value:!0}),o.toWPos=function(e){return e.getParent().convertToWorldSpaceAR(e.getPosition())},o.toSize=function(e){return e.getContentSize()},o.toBlack=function(e){e.color=cc.Color.BLACK},o.toWhite=function(e){e.color=cc.Color.WHITE},o.toRed=function(e){e.color=cc.Color.RED},cc._RF.pop()},{}],layer:[function(e,t,o){"use strict";cc._RF.push(t,"acfa3+JaB1G3p6Le926jTA9","layer"),Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,n=r.ccclass,i=r.property,c=e("./EdgeJudger"),a=e("./NodeProxy"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.edge=null,t.hero=null,t.background=null,t}return __extends(t,e),t.prototype.onLoad=function(){a.default.edge=this.edge.children,a.default.hero=this.hero},t.prototype.start=function(){this.background.runAction(cc.follow(a.default.hero,cc.rect(0,0,0,0))),this.EdgeJudge=new c.default(a.default.hero,a.default.edge)},t.prototype.update=function(){this.EdgeJudge.step(a.default.heroPos)},__decorate([i({type:cc.Node,tooltip:"\u53ea\u6709\u6302\u5728\u8fd9\u4e2a\u8282\u70b9\u4e0b\u7684\u969c\u788d\u624d\u4f1a\u68c0\u6d4b"})],t.prototype,"edge",void 0),__decorate([i(cc.Node)],t.prototype,"hero",void 0),__decorate([i(cc.Node)],t.prototype,"background",void 0),t=__decorate([n],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./EdgeJudger":"EdgeJudger","./NodeProxy":"NodeProxy"}]},{},["Changed","EdgeJudger","MathVec","MoveBoot","MoveCtrllor","NodeProxy","NodeVec","layer"]);