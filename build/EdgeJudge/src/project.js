window.__require=function e(t,o,n){function i(r,d){if(!o[r]){if(!t[r]){var a=r.split("/");if(a=a[a.length-1],!t[a]){var u="function"==typeof __require&&__require;if(!d&&u)return u(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+r+"'")}}var h=o[r]={exports:{}};t[r][0].call(h.exports,function(e){return i(t[r][1][e]||e)},h,h.exports,e,t,o,n)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({Changed:[function(e,t,o){"use strict";cc._RF.push(t,"b3cc3Xre1VNfZcxBIWG+/9Q","Changed"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.onChanged=function(e,t){this._last!==e&&t(),this._last=e},e}();o.default=n,cc._RF.pop()},{}],EdgeJudger:[function(e,t,o){"use strict";cc._RF.push(t,"c52e8K5kBZGx6edICEYefYy","EdgeJudger"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./MathVec"),i=e("./NodeVec"),c=e("./Changed"),r=function(){function e(e,t){this.moveNode=e,this.staticNode=t,this.changed=new c.default}return e.prototype.step=function(e){var t=this;this.changed.onChanged(e,function(){var o=t.staticNode.filter(function(e){return t.judge(t.moveNode,e)});if(1===o.length){i.toBlack(t.moveNode);var c=t.getLimitedPos(e,o[0],t.moveNode);t.moveNode.setPosition(t.getPos(t.moveNode,o[0],e,c))}else if(2===o.length){var r=e,d=n.getAround(t.moveNode,o[0]),a=n.getAround(t.moveNode,o[1]);switch(n.getQuad(e,o[0],o[1])){case 1:r=cc.v2(n.addMin(e.x,d.x.max),n.addMin(e.y,a.y.max));break;case 2:r=cc.v2(n.addMax(e.x,d.x.min),n.addMin(e.y,a.y.max));break;case 3:r=cc.v2(n.addMax(e.x,d.x.min),n.addMax(e.y,a.y.min));break;case 4:r=cc.v2(n.addMin(e.x,d.x.max),n.addMax(e.y,a.y.min))}t.moveNode.setPosition(r)}else i.toWhite(t.moveNode),t.moveNode.setPosition(e)})},e.prototype.getPos=function(e,t,o,c){var r;return this.inMoveSize(t,e,function(t,d,a,u){n.isIn(o.x,t)&&!n.isIn(o.y,u)?r=cc.v2(o.x,c.y):n.isIn(o.y,a)&&!n.isIn(o.x,d)?r=cc.v2(c.x,o.y):(i.toRed(e),r=o)}),r},e.prototype.getLimitedPos=function(e,t,o){var n,i;return n=e.y<t.y+t.height/2+o.height/2&&e.y>t.y-t.height/2-o.height/2?e.y<t.y?t.y-t.height/2-o.height/2:t.y+t.height/2+o.height/2:e.y,i=e.x<t.x+t.width/2+o.width/2&&e.x>t.x-t.width/2-o.width/2?e.x<t.x?t.x-t.width/2-o.width/2:t.x+t.width/2+o.width/2:e.x,cc.v2(i,n)},e.prototype.inMoveSize=function(e,t,o){o(cc.v2(e.x-e.width/2-t.width/2,e.x+e.width/2+t.width/2),cc.v2(e.x-e.width/2,e.x+e.width/2),cc.v2(e.y-e.height/2-t.height/2,e.y+e.height/2+t.height/2),cc.v2(e.y-e.height/2,e.y+e.height/2))},e.prototype.judge=function(e,t){var o=e.width/2+t.width/2,i=e.height/2+t.height/2,c=n.reduceVec2(e.getParent().convertToWorldSpaceAR(e.getPosition()),t.getParent().convertToWorldSpaceAR(t.getPosition()));return!(Math.abs(c.x)>o||Math.abs(c.y)>i)},e}();o.default=r,cc._RF.pop()},{"./Changed":"Changed","./MathVec":"MathVec","./NodeVec":"NodeVec"}],MathVec:[function(e,t,o){"use strict";cc._RF.push(t,"a98c3YOuYpC3IiunXck+e4C","MathVec"),Object.defineProperty(o,"__esModule",{value:!0}),o.reduceVec2=function(e,t){return cc.v2(e.x-t.x,e.y-t.y)},o.checkArray=function(e,t){for(var o=0,n=e;o<n.length;o++){var i=t(n[o]);if(i)return i}},o.isIn=function(e,t){return e<t.y&&e>t.x},o.addMax=function(e,t){return e<t?e:t},o.addMin=function(e,t){return e>t?e:t},o.getQuad=function(e,t,o){var n=e.x-t.x,i=e.y-o.y;return n>0?i>0?1:4:i>0?2:3},o.getAround=function(e,t){return{x:{min:t.x-t.width/2-e.width/2,max:t.x+t.width/2+e.width/2},y:{min:t.y-t.height/2-e.height/2,max:t.y+t.height/2+e.height/2}}},cc._RF.pop()},{}],MoveCtrllor:[function(e,t,o){"use strict";cc._RF.push(t,"972606VoidEJL1zY2KDgHWS","MoveCtrllor"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./NodeProxy"),i={limitToCircle:function(e,t){return this.getLength(e)<t?e:this.getPos(this.getAngle(e),t)},getAngle:function(e){return e.y>0?Math.acos(e.x/e.mag()):-Math.acos(e.x/e.mag())},getPos:function(e,t){return cc.v2(t*Math.cos(e),t*Math.sin(e))},getLength:function(e){return e.mag()}},c={angle:null,force:null,status:null,heroSpeed:null,radius:null,onload:function(e){this.angle=0,this.force=0,this.status=!1,e.node.setPosition(0,0)},init:function(e,t,o,n){c.onload(t),this.radius=void 0===o?25:o,this.heroSpeed=void 0===n?5:n,e.node.on("touchstart",function(e){this.status=!0},this),e.node.on("touchmove",function(o){var n=e.node.convertToNodeSpaceAR(o.getLocation()),c=i.limitToCircle(n,this.radius);t.node.setPosition(c),this.angle=i.getAngle(c),this.force=i.getLength(c)/this.radius},this),e.node.on("touchend",function(e){this.onload(t)},this),e.node.on("touchcancel",function(e){this.onload(t)},this)},getMoveAngle:function(){return this.angle},getForce:function(){return this.force},getStatus:function(){return this.status},updateCharacter:function(e){this.directToDes(e,"character")},updateCamera:function(e){this.directToDes(e,"camera")},directToDes:function(e,t){if(!0===this.getStatus()){var o=this.getMoveAngle(),i=this.getForce(),c="character"===t?cc.v2(e.x+this.heroSpeed*Math.cos(o)*i,e.y+this.heroSpeed*Math.sin(o)*i):"camera"===t?cc.v2(e.x-this.heroSpeed*Math.cos(o)*i,e.y-this.heroSpeed*Math.sin(o)*i):cc.v2();n.default.heroPos=c}}},r=cc.Enum({CHARACTER:1001,CAMERA:1002});cc.Class({extends:cc.Component,properties:{basicSpr:{default:null,type:cc.Sprite,displayName:"\u6447\u6746\u76d8"},touchSpr:{default:null,type:cc.Sprite,displayName:"\u6447\u6746\u62d6\u52a8\u70b9"},hero:{default:null,type:cc.Sprite,displayName:"\u89d2\u8272\u7cbe\u7075",visible:function(){return this.stragey===r.CHARACTER}},camera:{default:null,type:cc.Sprite,displayName:"\u80cc\u666f\u7cbe\u7075",visible:function(){return this.stragey===r.CAMERA}},radius:{default:25,type:cc.Integer,displayName:"\u62d6\u52a8\u534a\u5f84",tooltip:"\u9ed8\u8ba425"},heroSpeed:{default:5,type:cc.Integer,displayName:"\u89d2\u8272\u79fb\u52a8\u901f\u5ea6",tooltip:"\u9ed8\u8ba45",slide:!0,min:1,max:15,step:1},stragey:{type:cc.Enum(r),default:r.CHARACTER,displayName:"\u7b56\u7565",tooltip:"CHARACTER: \u5c4f\u5e55\u9759\u6b62, CAMERA: \u5c4f\u5e55\u79fb\u52a8, \u6ce8\u610f: CAMERA\u7b56\u7565\u65f6, \u89d2\u8272\u4e0d\u80fd\u662f\u80cc\u666f\u5b50\u8282\u70b9"}},onLoad:function(){c.init(this.basicSpr,this.touchSpr,this.radius,this.heroSpeed)},update:function(){this.stragey===r.CHARACTER?c.updateCharacter(this.hero.node):c.updateCamera(this.camera.node)}}),cc._RF.pop()},{"./NodeProxy":"NodeProxy"}],NodeProxy:[function(e,t,o){"use strict";cc._RF.push(t,"c98de/i0ylD+YW2Bm7qDMQN","NodeProxy"),Object.defineProperty(o,"__esModule",{value:!0});var n={edge:void 0,hero:void 0,heroPos:void 0};o.default=n,cc._RF.pop()},{}],NodeVec:[function(e,t,o){"use strict";cc._RF.push(t,"9337d+u8YFL1IW3fz3qUR8D","NodeVec"),Object.defineProperty(o,"__esModule",{value:!0}),o.toWPos=function(e){return e.getParent().convertToWorldSpaceAR(e.getPosition())},o.toSize=function(e){return e.getContentSize()},o.toBlack=function(e){e.color=cc.Color.BLACK},o.toWhite=function(e){e.color=cc.Color.WHITE},o.toRed=function(e){e.color=cc.Color.RED},cc._RF.pop()},{}],TouchFollow:[function(e,t,o){"use strict";cc._RF.push(t,"cf34carkXtI5YxdCtYzy44l","TouchFollow"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./NodeProxy"),i=cc._decorator,c=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){var e=this;this.node.on("touchmove",function(t){var o=e.node.getParent().convertToNodeSpaceAR(t.getLocation());n.default.heroPos=o})},t=__decorate([c],t)}(cc.Component));o.default=r,cc._RF.pop()},{"./NodeProxy":"NodeProxy"}],layer:[function(e,t,o){"use strict";cc._RF.push(t,"acfa3+JaB1G3p6Le926jTA9","layer"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,c=n.property,r=e("./EdgeJudger"),d=e("./NodeProxy"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.edge=[],t.hero=null,t}return __extends(t,e),t.prototype.onLoad=function(){d.default.edge=this.edge,d.default.hero=this.hero},t.prototype.start=function(){this.EdgeJudge=new r.default(d.default.hero,d.default.edge)},t.prototype.update=function(){this.EdgeJudge.step(d.default.heroPos)},__decorate([c([cc.Node])],t.prototype,"edge",void 0),__decorate([c(cc.Node)],t.prototype,"hero",void 0),t=__decorate([i],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./EdgeJudger":"EdgeJudger","./NodeProxy":"NodeProxy"}]},{},["Changed","EdgeJudger","MathVec","MoveCtrllor","NodeProxy","NodeVec","TouchFollow","layer"]);