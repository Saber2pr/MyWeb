window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({MoveCtrllor:[function(t,e,o){"use strict";cc._RF.push(e,"8d86fhcLfRIULZ36r5ObGeg","MoveCtrllor"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){return t.y>0?Math.acos(t.x/t.mag()):-Math.acos(t.x/t.mag())},i=function(t,e){return cc.v2(e*Math.cos(t),e*Math.sin(t))},r=function(t){return t.mag()},c=function(t){return 180*t/Math.PI},s=function(t){return t.getParent().convertToWorldSpaceAR(t.position)},a=function(){function t(t,e,o,n,i){this.refresh(e),this.__ANCHOR__=s(t),this.addListener(t,e),this.initPhysicsBody(o,n,i),this.initContact()}return t.prototype.addListener=function(t,e){var o=this;t.on("touchstart",function(n){o.status=!0,o.update(t,e,n),o.isJumped=!1}),t.on("touchmove",function(n){o.update(t,e,n),function(t,e,o,n,i){c(t)>e&&c(t)<o?n&&n():i&&i()}(o.angle,45,135,function(){o.isOnGround&&!o.isJumped&&o.jump()},function(){o.isJumped=!1})}),t.on("touchend",function(){o.refresh(e)}),t.on("touchcancel",function(){o.refresh(e)})},t.prototype.update=function(t,e,o){var c=function(t,e){return r(t)<e?t:i(n(t),e)}(function(t,e){return cc.v2(e.x-t.x,e.y-t.y)}(this.__ANCHOR__,o.getLocation()),t.width/2);e.setPosition(c),this.angle=n(c)},t.prototype.refresh=function(t){this.angle=0,this.status=!1,t.setPosition(0,0)},t.prototype.initPhysicsBody=function(t,e,o){this.targetBody=t.getComponent(cc.RigidBody),this.landImpulse=e,this.portImpulse=o},t.prototype.initContact=function(){var t=this;this.targetBody.onBeginContact=function(){t.isOnGround=!0}},t.prototype.jump=function(){this.angle,this.targetBody.applyLinearImpulse(i(this.angle,this.portImpulse),this.targetBody.getWorldCenter(),!0),this.isOnGround=!1,this.isJumped=!0},t.prototype.move=function(){this.targetBody.applyLinearImpulse(cc.v2(i(this.angle,this.landImpulse).x,0),this.targetBody.getWorldCenter(),!0)},t.prototype.step=function(){!0===this.status&&this.move()},t}(),p=cc._decorator,u=p.ccclass,d=p.property,h=cc.Enum({NO:0,YES:1}),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touch=null,e.hero=null,e.landImpulse=1e3,e.portImpulse=3e4,e.cameraActive=h.NO,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.moveCtrllor=new a(this.node,this.touch,this.hero,this.landImpulse,this.portImpulse),this.camera=cc.Canvas.instance.node.getComponentInChildren(cc.Camera).node},e.prototype.update=function(){this.moveCtrllor.step(),this.cameraActive&&function(t,e){t.setPosition(function(t,e){return t.getParent().convertToNodeSpaceAR(e)}(t,s(e)))}(this.camera,this.hero)},__decorate([d({type:cc.Node,displayName:"\u8f6e\u76d8\u62d6\u52a8\u70b9"})],e.prototype,"touch",void 0),__decorate([d({type:cc.Node,displayName:"\u89d2\u8272\u8282\u70b9"})],e.prototype,"hero",void 0),__decorate([d({type:cc.Integer,displayName:"\u6c34\u5e73\u51b2\u91cf\u6a21"})],e.prototype,"landImpulse",void 0),__decorate([d({type:cc.Integer,displayName:"\u5782\u76f4\u51b2\u91cf\u6a21"})],e.prototype,"portImpulse",void 0),__decorate([d({type:cc.Enum(h),displayName:"\u662f\u5426\u5f00\u542f\u6444\u50cf\u673a\u8ddf\u968f"})],e.prototype,"cameraActive",void 0),e=__decorate([u],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],MoveFront:[function(t,e,o){"use strict";var n;cc._RF.push(e,"6683aJCmfxDvK1XvopQdsv/","MoveFront"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.left=0]="left",t[t.right=1]="right",t[t.up=2]="up",t[t.down=3]="down"}(n||(n={}));var i=function(t,e){return cc.v2(e*Math.cos(t),e*Math.sin(t))},r=function(){function t(t,e,o,n,i,r,c){return this.leftBtn=t,this.rightBtn=e,this.upBtn=o,this.downBtn=n,this.initPhysicsBody(i,r,c),this.initContact(),this}return t.prototype.listen=function(){var t=this;this.addTouchListener(this.leftBtn,function(){t.front=n.left}),this.addTouchListener(this.rightBtn,function(){t.front=n.right}),this.addTouchListener(this.upBtn,function(){t.front=n.up}),this.addTouchListener(this.downBtn,function(){t.front=n.down}),this.addKeyListener()},t.prototype.initPhysicsBody=function(t,e,o){this.targetBody=t.getComponent(cc.RigidBody),this.landImpulse=e,this.portImpulse=o},t.prototype.apply=function(t){this.targetBody.applyLinearImpulse(t,this.targetBody.getWorldCenter(),!0)},t.prototype.step=function(){if(this.isHold)switch(this.front){case n.left:this.apply(i(Math.PI,this.landImpulse));break;case n.right:this.apply(i(0,this.landImpulse));break;case n.up:this.isOnGround&&this.jump();break;case n.down:this.apply(i(-Math.PI/2,this.portImpulse))}},t.prototype.jump=function(){this.apply(i(Math.PI/2,this.portImpulse)),this.isOnGround=!1},t.prototype.initContact=function(){var t=this;this.targetBody.onBeginContact=function(){t.isOnGround=!0}},t.prototype.addTouchListener=function(t,e){var o=this;t.on(cc.Node.EventType.TOUCH_START,function(){o.isHold=!0,e&&e()}),t.on(cc.Node.EventType.TOUCH_MOVE,function(e){o.isHold=function(t,e){return t.getBoundingBox().contains(t.getParent().convertToNodeSpaceAR(e))}(t,e.getLocation())}),t.on(cc.Node.EventType.TOUCH_END,function(){o.isHold=!1}),t.on(cc.Node.EventType.TOUCH_CANCEL,function(){o.isHold=!1})},t.prototype.addKeyListener=function(){var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(t.isHold=!0,e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:t.front=n.left;break;case cc.macro.KEY.d:case cc.macro.KEY.right:t.front=n.right;break;case cc.macro.KEY.w:case cc.macro.KEY.up:t.front=n.up;break;case cc.macro.KEY.s:case cc.macro.KEY.down:t.front=n.down}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(e){t.isHold=!1})},t}(),c=cc._decorator,s=c.ccclass,a=c.property,p=cc.Enum({NO:0,YES:1}),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftBtn=null,e.rightBtn=null,e.upBtn=null,e.downBtn=null,e.hero=null,e.landImpulse=1e3,e.portImpulse=3e4,e.cameraActive=p.NO,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.MoveFront=new r(this.leftBtn,this.rightBtn,this.upBtn,this.downBtn,this.hero,this.landImpulse,this.portImpulse),this.camera=cc.Canvas.instance.node.getComponentInChildren(cc.Camera).node},e.prototype.start=function(){this.MoveFront.listen()},e.prototype.update=function(){this.MoveFront.step(),this.cameraActive&&function(t,e){t.setPosition(function(t,e){return t.getParent().convertToNodeSpaceAR(e)}(t,function(t){return t.getParent().convertToWorldSpaceAR(t.position)}(e)))}(this.camera,this.hero)},__decorate([a(cc.Node)],e.prototype,"leftBtn",void 0),__decorate([a(cc.Node)],e.prototype,"rightBtn",void 0),__decorate([a(cc.Node)],e.prototype,"upBtn",void 0),__decorate([a(cc.Node)],e.prototype,"downBtn",void 0),__decorate([a(cc.Node)],e.prototype,"hero",void 0),__decorate([a({type:cc.Integer,displayName:"\u6c34\u5e73\u51b2\u91cf\u6a21"})],e.prototype,"landImpulse",void 0),__decorate([a({type:cc.Integer,displayName:"\u5782\u76f4\u51b2\u91cf\u6a21"})],e.prototype,"portImpulse",void 0),__decorate([a({type:cc.Enum(p),displayName:"\u662f\u5426\u5f00\u542f\u6444\u50cf\u673a\u8ddf\u968f"})],e.prototype,"cameraActive",void 0),e=__decorate([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}]},{},["MoveCtrllor","MoveFront"]);